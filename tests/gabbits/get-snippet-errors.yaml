fixtures:
  - XSnippetApi

tests:
  - name: create a new snippet
    POST: /v1/snippets
    request_headers:
      content-type: application/json
    data:
      title: Hello, World!
      syntax: python
      content: print('Hello, World!')
    status: 201

  - name: retrieve snippet (unsupported accept)
    GET: $LOCATION
    request_headers:
      accept: text/html
    response_headers:
      content-type: application/json
    status: 406
    response_json_paths:
      $:
        message: "Support media types: application/json"

  - name: retrieve snippet (not found)
    GET: /v1/snippets/foobar
    response_headers:
      content-type: application/json
    response_json_paths:
      $.message: Snippet with id `foobar` is not found
      $.`len`: 1
    status: 404
